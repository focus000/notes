\documentclass[a4paper]{book}

%  math support
\usepackage{mathtools}
\usepackage{extarrows}
\usepackage[thmmarks,amsmath]{ntheorem}
\usepackage{amssymb}
% \usepackage{amsmath}
\usepackage{hyperref}

% theorems
\newtheorem{thm}{Theorem}[chapter]
\newtheorem{defi}[thm]{Definition}
\newtheorem{lemma}[thm]{Lemma}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{coro}[thm]{Corollary}
{
    \theoremstyle{nonumberplain}
    \theoremheaderfont{\normalfont}
    \theorembodyfont{\normalfont}
    % auto add \QED
    \theoremsymbol{\mbox{$\Box$}}
    \newtheorem{proof}{proof}
}
{
    \theoremstyle{nonumberplain}
    \newtheorem{myDef}{Definition}
}
% abbr
\newcommand\st{\quad \text{s.t.} \quad}
\newcommand\diff{\,\mathrm{d}}
\newcommand\compact{\subset \subset}
\newcommand\xiff\xLongleftrightarrow

% declare \norm macro
\DeclarePairedDelimiter{\norm}\lVert\rVert
\DeclarePairedDelimiter{\set}\lbrace\rbrace
\DeclarePairedDelimiter{\abs}\lvert\rvert
% Functional Analysis Symbols
\def\L{\mathcal{L}}
\def\R{\mathbb{R}}
\DeclareMathOperator{\Ima}{Im}
\DeclareMathOperator{\Ker}{Ker}
% domain range
\DeclareMathOperator{\domain}{D}
\DeclareMathOperator{\range}{R}

\begin{document}
\part{Functional Analysis}
\chapter{Banach and Hilbert Spaces}
\chapter{ODEs}
\chapter{Linear Operators}
\begin{myDef}[Linear]
    An operator $A$ on a vector space is \emph{linear} if
    \[
        A(x+\lambda y)=Ax+\lambda Ay, \forall x, y \in V \text{ and } \lambda \in \R.
    \]
\end{myDef}
\section{Bounded Linear Operators on Banach Spaces}
\begin{myDef}[Bounded]
    A linear operator $A: X \to Y$ is bounded if $\exists M$ s.t.
    \begin{equation}\label{eq:linear opeartor bounded}
        \norm{Ax}_Y \leq M \norm{x}_X, \forall x \in X.
    \end{equation}
    Def $A \in \L(X,Y)$
    \begin{align}
        \norm{A}_{\L(X,Y)}=\inf\set{M:\eqref{eq:linear opeartor bounded} \text{ holds}} \iff \\
        \norm{A}_{\L(X,Y)}=\sup_{x \neq 0}\frac{\norm{Ax}_Y}{\norm{x}_X}=\sup_{\norm{x}_X=1}\norm{Ax}_Y
    \end{align}
\end{myDef}
\begin{proof}
    \begin{align*}
        \eqref{eq:linear opeartor bounded} \iff \frac{\norm{Ax}_Y}{\norm{x}_X} \leq M, x \neq 0 \\
        \implies \inf{M} = \exists \sup_{x \neq 0}\frac{\norm{Ax}_Y}{\norm{x}_X}                     \\
        = \sup_{x \neq 0}\norm{A\frac{x}{\norm{x}_X}}_Y = \sup_{\norm{x}_X=1}\norm{Ax}_Y
    \end{align*}
\end{proof}
\begin{prop}
    $Y \in$ Banach space $\implies \L(X,Y) \in$ Banach space.
\end{prop}
\begin{proof}
    Let $\set{A_n}$ be Cauchy $\subset \L(X,Y). \implies$
    \begin{gather}
        \norm{A_n - A_m}_{op} \leq \epsilon, \forall n,m \geq N.
        \intertext{$\forall$ fixed $x \in X$.}
        \norm{A_nx-A_mx}_Y=\norm{(A_n-A_m)x}_Y \leq \norm{A_n-A_m}_{op}\norm{x}_X,
        \intertext{$\implies \set{A_nx}$ is Cauchy. Since $Y$ is complete $\implies$}
        A_nx \to y(x), \notag
        \intertext{def $A:X \to Y$, $Ax \mapsto y$. $A \in \L(X,Y)$: }
        A(x+\lambda y) = \lim_{n \to \infty}A_n(x + \lambda y)
        = \lim_{n \to \infty}A_nx + \lambda \lim_{n \to \infty}A_ny = Ax+\lambda Ay. \notag
        \intertext{$n,m \geq N, n \to \infty, \implies$}
        \norm{Ax-A_nx}_Y \leq \epsilon(x) \leq \epsilon \norm{x}_X.
        \intertext{$A$ is bounded, and}
        \norm{A_n - A}_{op} \leq \epsilon,
    \end{gather}
    $\implies A_n \to A \in \L(X,Y)$.
\end{proof}

\begin{prop}
    $L: X \to Y$ be a linear map, $L$ continuous $\iff$ $L$ bounded.
\end{prop}
\begin{proof}
    ($\impliedby$)
    \begin{gather*}
        \norm{L(x_n - x)}_Y \leq \norm{L}_{op}\norm{x_n - x}_X,
    \end{gather*}
    ($\implies$) If $L$ continuous but unbounded then $\forall n, \exists y_n$ s.t. $\norm{Ly_n}_Y > n^2\norm{y_n}_X$. Then
    \begin{gather*}
        x_n = y_n/(n\norm{y_n}_X) \to 0,
    \end{gather*}
    but $\norm{Lx_n}_Y > 0, \implies L$ is not continuous, a contradiction.
\end{proof}

\begin{lemma}
    Let $k(x,y) \in L^2(\Omega \times \Omega)$:
    \begin{gather*}
        \int_{\Omega}\int_{\Omega}\abs{k(x,y)}^2 \diff x \diff y = C^2 < \infty.
    \end{gather*}
    Integral operator $K: L^2(\Omega) \to L^2(\Omega)$ defined by
    \begin{gather}
        [Ku](x)=\int_{\Omega}k(x,y)u(y) \diff y
    \end{gather}
    is bounded.
\end{lemma}
\begin{proof}
    Use C-S inequality
    \begin{align*}
        \abs{Ku}^2 &= \int_{\Omega}(\int_{\Omega}k(x,y)u(y) \diff y)^2 \diff x \\
        &\leq \int_{\Omega}(\int_{\Omega}\abs{k(x,y)}^2 \diff y)(\int_{\Omega}\abs{u(y)}^2 \diff y)\diff x \\
        &= (\int_{\Omega}\int_{\Omega}\abs{k(x,y)}^2 \diff x \diff y)(\int_{\Omega}\abs{u(y)}^2 \diff y) \\
        &= C^2 \abs{u}^2
    \end{align*}
\end{proof}
\section{Domain, Range, Kernel, and the Inverse Operator}
% TODO: bounded linear operator : D(A)=X by hahn-banach thm from chapter 4, while the domain is an intrinsic part of the def of unbounded operators
\begin{myDef}[inverse]
    $A$ is inverse if
    \begin{gather*}
        Ax = y
    \end{gather*}
    has a unique solution, $\forall y \in \range(A)$. Define $A^{-1}y=x$. Easy check:
    \begin{gather*}
        AA^{-1}u=u, \forall u \in \range(A) \text{ and } A^{-1}Au=u, \forall u \in \domain(A).
    \end{gather*}
    If $A$ is linear and $A^{-1}$ exist then it is linear too.    
\end{myDef}
\begin{proof}
    $\forall x,y \in \range(A), \exists x', y' \in \domain(A)$ s.t.$Ax'=x, Ay'=y$.
    \begin{align*}
        A^{-1}(x+\lambda y)&=A^{-1}(Ax'+\lambda Ay')=A^{-1}A(x'+\lambda y') \\
        &=x'+\lambda y'=A^{-1}x+\lambda A^{-1}y.
    \end{align*}
\end{proof}
\begin{lemma}
    $A$ is invertible iff $\Ker (A) = \set{0}$.
\end{lemma}
\begin{proof}
    ($\implies$), $Ax=y$ has unique solution $\forall y \in \range(A)$.
    If $\exists 0 \neq z \in \Ker(A)$, then $A(x+z)=y$ also, so $\Ker(A)$ must be $\set{0}$.\\
    ($\impliedby$), if $A$ is not invertible 
    $\implies \exists y \in \range(A), x_1 \neq x_2 \in \domain(A)$ s.t.
    $Ax_1=y, Ax_2=y. \implies A(x_1-x_2)=0 \implies 0 \neq x_1-x_2 \in \Ker(A)$. 
\end{proof}
\section{The Baire Category Theorem}
\begin{thm}[Baire Category Theorem]
    If $G_i$ is a countable family of dense open subsets of a Banach space $X$ then
    \begin{equation*}
        G = \bigcap_{n=1}^\infty G_n
    \end{equation*}
    is dense in $X$.
\end{thm}
\begin{proof}
    $\overline G = X \iff \forall x \in X$, and $r>0$, $B(x,r) \cap G \neq \emptyset$\\
    since $\forall G_n$ is dense and open, $\exists y \in G_n, s>0$,
    \begin{equation*}
        B(x,r)\cap G_n \supset B(y,2s) \supset \overline{B}(y,s).
    \end{equation*}
    $\exists x_1 \in X, r_1 < 2^{-1} \text{ s.t. } \overline{B}(x_1,r_1) \subset G_1 \cap B(x,r)$\\
    $\exists x_2 \in X, r_2 < 2^{-2} \text{ s.t. } \overline{B}(x_2,r_2) \subset G_2 \cap B(x_1,r_1)$\\
    $\cdots$\\
    $\exists x_n \in X, r_n < 2^{-n} \text{ s.t. } \overline{B}(x_n,r_n) \subset G_n \cap B(x_{n-1},r_{n-1})$.\\
    $\implies$
    \begin{gather}
        \overline{B}(x_1,r_1) \supset \overline{B}(x_2,r_2) \supset \cdots .
    \end{gather}
    Since the space is complete,
    \begin{gather*}
        \bigcap_{n=1}^\infty \overline{B}(x_n,r_n)=x_0.
    \end{gather*}
    $\implies x_0 \in \overline{B}(x_1,r_1) \subset B(x,r)$ and $x_0 \in \overline{B}(x_n,r_n) \subset G_n, \forall n. $\\
    $\implies x_0 \in B(x,r) \cap G$.
\end{proof}
\begin{myDef}[nowhere dense]
    $W$ is nowhere dense if $\overline{W}^\circ = \emptyset$.
\end{myDef}
\begin{coro}\label{Baire Category thm coro}
    Let $X$ be a Banach space and $F_j$ be a countable sequence of nowhere dense subsets. Then
    \begin{gather*}
        \bigcup_{j=1}^\infty F_j \neq X.
    \end{gather*}
\end{coro}
\begin{proof}
    Suppose $\bigcup_{j=1}^\infty F_j = X$,
    \begin{gather*}
        X=\overline{\bigcap_{j=1}^\infty{X \setminus \overline{F_j}}}=\overline{X \setminus \overline{\bigcup_{j=1}^\infty F_j}} \subset \overline{X \setminus \bigcup_{j=1}^\infty F_j} = \emptyset.
    \end{gather*}
    Contradiction!
\end{proof}
\begin{thm}[Uniform Boundedness Principle]
    Let $X$ be a Banach space and $Y$ a normed space. Let $S \subset \L(X,Y)$, and let
    \begin{equation*}
        \sup_{T \in S}\norm{Tx}_Y < \infty \text{ for all } x \in X.
    \end{equation*}
    Then
    \begin{equation*}
        \sup_{T \in S}\norm{T}_{\L(X,Y)} < \infty.
    \end{equation*}
\end{thm}
\begin{proof}
    Define
    \begin{equation*}
        F_j=\set{x \in X:\norm{Tx}_Y \leq j, \forall T \in S}.
    \end{equation*}
    $\implies$ $\bigcup_j{F_j}=X$.
    \begin{gather*}
        X \setminus F_j = \set{x \in X : \norm{T_x x}_Y > j, \exists T_x \in S},
        \intertext{$\forall x_0 \in X \setminus F_j$, $\forall \epsilon > 0, \text{ let } \delta = \frac{\epsilon}{\norm{T}_{\L(X,Y)}},\forall x \in B(x_0, \delta)$ s.t.}
        \norm{T_{x_0}x-T_{x_0}x_0}=\norm{T_{x_0}(x-x_0)} \leq \norm{T}_{\L(X,Y)}\norm{x-x_0} <\epsilon.
    \end{gather*}
    let $\epsilon = \epsilon_0 = \norm{j - x_0}/2$, $\implies B(x_0,\delta_0) \subset X \setminus F_j$, \\
    $\implies F_j$ is closed.\\
    $\overset{\ref{Baire Category thm coro}}{\implies} F_n^\circ \neq \emptyset$ for some $n$\\
    Then $\exists y \in X, r > 0$ s.t.
    \begin{equation*}
        B(y,r) \subset F_n.
    \end{equation*}
    Therefore, if $\norm{x}_X \leq r$,
    \begin{equation*}
        \norm{Tx}_Y=\norm{T(x+y)+T(-y)} \leq n +\norm{Ty}_Y \leq 2n,
    \end{equation*}
    since $\sup_{T \in S}\norm{Ty}_Y < \infty, \forall x : \norm{x}_X=r \implies$
    \begin{equation*}
        \norm{Tx}_Y \leq \frac{2n}{r}\norm{x}_X, \text{ for all }T \in S,
    \end{equation*}
    since $T$ is linear, this follows for all $x$.
\end{proof}
% TODO: app ex 3.4
\section{Compact Operators}
\begin{defi}
    An opeartor $K:X \to Y$ is compact if
    \begin{equation*}
        \overline{K((W < \infty) \subset X)} \compact Y.
    \end{equation*}
    $\xiff{\text{usually used}} \forall (\set{x_n} < \infty) \subset X, \exists \set{Kx_{n_j}}$ converge.
\end{defi}

\end{document}
